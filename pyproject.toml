[tool.poetry]
name = "everyelection"
version = "0.0.0"
description = ""
authors = ["chris48s <git@chris-shaw.dev>"]
readme = "README.md"
package-mode = false

[tool.poetry.dependencies]
python = "^3.12"
beautifulsoup4 = "4.12.1"
boto3 = "1.34.148"
botocore = "1.34.148"
commitment = "3.0.1"
Django = "4.2.15"
django-cors-headers = "4.2.0"
django-extensions = "3.2.3"
django-filter = "24.2"
django-formtools = "2.3"
django-localflavor = "4.0"
django-middleware-global-request = "0.3.1"
django-model-utils = "4.3.1"
django-storages = "1.13.2"
djangorestframework = "3.15.2"
djangorestframework-gis = "1.0"
djangorestframework-jsonp = "1.0.2"
eco-parser = "0.2.0"
geojson = "3.1.0"
glob2 = "0.7"
markdown = "3.4.3"
psutil = "6.0.0"
psycopg-binary = "3.1.19"
rapidfuzz = "3.4.0"
requests = "2.32.3"
retry2 = "0.9.5"
scrapy = "2.11.2"
six = "1.16.0"
sqlparse = "0.5.0"
uk-election-ids = "0.7.5"
uk-election-timetables = "2.4.1"
uk-geo-utils = "0.12.0"
django-pipeline = "3.0.0"
dc-design-system = {git = "https://github.com/DemocracyClub/design-system.git", rev = "0.5.0"}
dc-django-utils = {git = "https://github.com/DemocracyClub/dc_django_utils.git", rev = "6.1.1"}


[tool.poetry.group.dev.dependencies]
mock = "5.1.0"
model-mommy = "2.0.0"
pytest = "7.4.0"
pluggy = "1.5.0"
pytest-django = "4.5.2"
pytest-cov = "5.0.0"
pytest-freezegun = "0.4.2"
factory_boy = "3.3.1"
vcrpy = "6.0.1"
pytest-xdist = "3.6.1"
safety = "3.2.7"
ruff = "0.2.2"
djhtml = "3.0.6"
pytest-ruff = "0.3.2"
playwright = "1.45.1"
pytest-playwright = "0.4.2"
moto = "5.0.9"


[tool.poetry.group.production.dependencies]
gunicorn = "22.0.0"
jsmin = "3.0.1"
sentry-sdk = "2.14.0"


[tool.poetry.group.local.dependencies]
django-debug-toolbar = "4.4.6"


[tool.poetry.group.cdk.dependencies]
aws-cdk-lib = "2.160.0"
aws-cdk-aws-lambda-python-alpha = "2.160.0a0"
constructs = "10.0.0"
pyyaml = "6.0.1"
diagrams = "0.23.3"


[build-system]
requires = ["poetry-core"]
build-backend = "poetry.core.masonry.api"

[tool.black]
line-length = 80

[tool.ruff]
line-length = 80
ignore = ["E501"]

extend-exclude = ["every_election/settings/local.py"]

extend-select = [
    "I",
    "C4",
    "SIM",
    "Q003",
    "RET",
]

[tool.pytest.ini_options]
norecursedirs = [
    "node_modules",
    "src",
    "every_election/static_root",
    "every_election/static",
    ".aws-sam",
    ".ruff-cache",
    ".circleci",
]
DJANGO_SETTINGS_MODULE = "every_election.settings.testing"
addopts =[
    "--ignore=*/__pycache__",
    "--ignore=.*",
    "--ignore=.download-cache",
    "--ignore=every_election/settings/local.py",
    "--ignore=lib",
    "--ruff",
    "--ruff-format",
]
